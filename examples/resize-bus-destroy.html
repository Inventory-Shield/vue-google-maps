<body>
  <div id="root">
    <h1>Resize Bus</h1>

    <p>
      There should be no error toggling the visibility of the maps
      <button @click=updateStyle>
        Toggle Visibility
      </button>
    </p>

    <div v-if="showElements">
      <gmap-map
        :style="currentStyle"
        :center="{lat: 1.38, lng: 103.8}"
        :zoom=12>
      </gmap-map>

      <gmap-map
        :style="currentStyle"
        :center="{lat: 1.38, lng: 103.8}"
        :zoom=12>
      </gmap-map>

      <gmap-map
        :style="currentStyle"
        :center="{lat: 1.38, lng: 103.8}"
        :zoom=12
        :resize-bus="customBus">
      </gmap-map>
    </div>
  </div>

<script src="https://unpkg.com/vue@3.x"></script>
<script src="vue-google-maps.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const { createApp } = Vue
  
  const app = createApp({
    data: () => ({
      currentStyle: {
        display: 'inline-block',
        width: '200px',
        height: '200px',
      },
      showElements: true,
      customBus: {},
    }),
    methods: {
      updateStyle() {
        this.showElements = !this.showElements;
        Vue.$gmapDefaultResizeBus.$emit('resize');
      },
      updateBus() {
        this.customBus.$emit('resize');
      }
    }
  });
  
  app.use(VueGoogleMaps, {
    load: {
      key: 'AIzaSyDf43lPdwlF98RCBsJOFNKOkoEjkwxb5Sc',
    },
  });
  
  app.mount('#root')
});

</script>

</body>
